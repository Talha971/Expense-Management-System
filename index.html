<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Expense Management System</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="style.css" />
    <style>
      table {
        margin-top: 15px;
        width: 100%;
      }
    </style>
  </head>
  <body class="text-center">
    <div class="container">
      <h1>Expense Mangement System</h1>
      <br />
      <button id="addButton" onclick="addExpense()">
        <span>+</span> Add Expense
      </button>
      <!-- table -->
      <table id="table">
        <tr>
          <th>ID</th>
          <th>ITEM_NAME</th>
          <th>AMOUNT</th>
          <th>ACTION</th>
          <!-- <th></th> -->
        </tr>
        <tfoot class="tableFoott">
          <tr id="sumRow">
            <th colspan="2">TOTAL AMOUNT</th>
            <th colspan="1">0</th>
            <th colspan="1"><button id="totalBtn">Calculate Total</button></th>
          </tr>
        </tfoot>
      </table>
    </div>

    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
      crossorigin="anonymous"
    ></script>
    <script>
      var sno;
      var itemName;
      var amount;
      var table = document.getElementById("table");

      function addExpense() {
        sno = +prompt("Enter Id");
        itemName = prompt("Enter Item Name");
        amount = +prompt("Enter Amount");

        var editBtn = document.createElement("img");
        var deleteBtn = document.createElement("img");

        // Set attributes for the Edit button
        editBtn.setAttribute("onclick", "editExpense(this)");
        editBtn.setAttribute("src", "./images & icons/edit.png");
        editBtn.setAttribute("class", "pointerMouse");

        // Set attributes for the Delete button
        deleteBtn.setAttribute("onclick", "deleteExpense(this)");
        deleteBtn.setAttribute("src", "./images & icons/delete.png");
        deleteBtn.setAttribute("class", "pointerMouse");

        var tr = table.insertRow();
        table.appendChild(tr);

        var cell1 = tr.insertCell(0);
        cell1.textContent = sno;
        var cell2 = tr.insertCell(1);
        cell2.textContent = itemName;
        var cell3 = tr.insertCell(2);
        cell3.textContent = amount;
        var cell4 = tr.insertCell(3);

        // Append buttons to the fourth cell
        cell4.appendChild(editBtn);
        cell4.appendChild(deleteBtn);
      }

      // Example edit and delete functions
      function editExpense(button) {
        sno = +prompt(
          "enter Updated Id",
          button.parentNode.parentNode.children[0].textContent
        );
        button.parentNode.parentNode.children[0].textContent = sno;

        itemName = prompt(
          "enter Updated Item Name",
          button.parentNode.parentNode.children[1].textContent
        );
        button.parentNode.parentNode.children[1].textContent = itemName;

        amount = +prompt(
          "enter Updated Amount",
          button.parentNode.parentNode.children[2].textContent
        );
        button.parentNode.parentNode.children[2].textContent = amount;
      }

      function deleteExpense(button) {
        button.parentNode.parentNode.remove();
      }

      document.getElementById("totalBtn").addEventListener("click", () => {
        var sum = 0;
        for (var i = 0; i < table.rows.length - 1; i++) {
          var cellValue = parseInt(table.rows[i].cells[2].textContent);
          sum += isNaN(cellValue) ? 0 : cellValue;
        }

        var sumCell = table.rows[table.rows.length - 1].cells[1];
        sumCell.textContent = sum;
      });
    </script>
  </body>
</html>
